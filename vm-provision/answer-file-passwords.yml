---
# admin password
- name: Create admin_pass.txt
  file:
    path: 'temp/{{ customer_name }}/admin_pass.txt'
    state: touch
    mode: 0777
  register: "admin_pass_file"
  delegate_to: localhost

- name: Add admin password to temp file
  lineinfile:
    path: 'temp/{{ customer_name }}/admin_pass.txt'
    line: '{{ cucm_primary_node.host_admin_password }}'
  register: "cucm_initial_line_admin_pass_primary_answer_file"
  delegate_to: localhost

- name: Encrypt admin_pass
  script: password_encryption.py admin_pass {{ customer_name }}
  args:
    executable: python3
  register: encrypted_admin_password
  delegate_to: localhost

- name: Delete admin_pass.txt
  file:
    path: 'temp/{{ customer_name }}/admin_pass.txt'
    state: absent
  register: "delete_admin_pass_file"
  delegate_to: localhost

# security password
- name: Create security_pass.txt
  file:
    path: 'temp/{{ customer_name }}/security_pass.txt'
    state: touch
    mode: 0777
  register: "security_pass_file"
  delegate_to: localhost

- name: Add security password to temp file
  lineinfile:
    path: 'temp/{{ customer_name }}/security_pass.txt'
    line: '{{ cucm_primary_node.host_security_password }}'
  register: "cucm_initial_line_security_pass_primary_answer_file"
  delegate_to: localhost

- name: Encrypt security_pass
  script: password_encryption.py security_pass {{ customer_name }}
  args:
    executable: python3
  register: encrypted_security_password
  delegate_to: localhost

- name: Delete security_pass.txt
  file:
    path: 'temp/{{ customer_name }}/security_pass.txt'
    state: absent
  register: "delete_security_pass_file"
  delegate_to: localhost

# application user password
- name: Create app_user_pass.txt
  file:
    path: 'temp/{{ customer_name }}/app_user_pass.txt'
    state: touch
    mode: 0777
  register: "security_pass_file"
  delegate_to: localhost

- name: Add app user password to temp file
  lineinfile:
    path: 'temp/{{ customer_name }}/app_user_pass.txt'
    line: '{{ cucm_primary_node.host_app_user_password }}'
  register: "cucm_initial_line_app_user_pass_primary_answer_file"
  delegate_to: localhost

- name: Encrypt app_user_pass
  script: password_encryption.py app_user_pass {{ customer_name }}
  args:
    executable: python3
  register: encrypted_app_user_password
  delegate_to: localhost

- name: Delete app_user_pass.txt
  file:
    path: 'temp/{{ customer_name }}/app_user_pass.txt'
    state: absent
  register: "delete_app_user_pass_file"
  delegate_to: localhost